# cisco
## Базовое ознакомление

[Терминология](#title0)

[Практическое задание 1: ICMP симуляция](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%201.md)

[Практическое задание 2: DHCP, DNS, WEB server](https://github.com/Vinnjy/cisco/main/Практическая_работа_2.md)

[Практическое задание 3: Статическая маршрутизация](https://github.com/Vinnjy/cisco/main/Практическая_работа_3.md)

## <a id="title0">Терминология</a>

### Для начала пройдёся по ***панели устройств*** в cisco packet tracer. Здесь мы поймём из чего состоит сеть.

<img width="162" height="91" alt="image" src="https://github.com/user-attachments/assets/a7ca9f67-61af-45a7-99b7-4a47040cb1f0" />  Рис.1

На рис.1 изображены ***конечные*** и ***промежуточные устройства***, а также ***линии связи*** (сетевые среды/среда передачи данных).

<img width="491" height="91" alt="image" src="https://github.com/user-attachments/assets/48ff5b6f-ed20-43af-b891-fbb202a966fa" />  Рис.2

На рис.2 изображены в верхнем левом углу значок молнии - ***среда передача данных*** или кабеля (более простым языком). 
В данных практических работах будем использовать прямой кабель (чёрный провод) и кроссовер (рядом с чёрным провод, выглядит, как пунктир).

* <u>**Прямой**</u> используется для подключения устройств разного типа (конечные и промежуточные).

* <u>**Кросссовер**</u> для подключения устройтсв одинакового типа (конечное и конечное, промежуточное и промежуточное).

<img width="612" height="83" alt="image" src="https://github.com/user-attachments/assets/65ff05b1-8224-4b0c-b0a9-05a1b778b142" />  Рис.3

На рис.3 изображены в верхнем нижним углу находятся конечные устройства.

* <u>**Конечные устройства**</u> - компьютер, сервер, принтер, смартфон. Они начинают запросы и ответы, когда хотят что-то узнать у других конечных устройств.

<img width="275" height="50" alt="image" src="https://github.com/user-attachments/assets/1fbe8af8-aefc-492f-85a6-44c487bd619b" />  Рис.4

<img width="460" height="57" alt="image" src="https://github.com/user-attachments/assets/7b51bc4d-9c3a-4906-85be-08ccb68f39f8" />  Рис.5

<img width="613" height="63" alt="image" src="https://github.com/user-attachments/assets/d0130078-9257-4b20-b3bb-d5d973d65cf1" />  Рис.5

На рис.4, 5, 6 изображены: 1 - хабы, 2 - коммутаторы, 3 - маршрутизаторы (по-английски роутер). Это всё промежуточные устройства.

* <u>**Промежуточные устройства**</u> - хаб, коммутатор, маршрутизатор, и т.д. Они управляют процессом передачи данных (направляют, фильтруют данные), занимаются обеспечением связи между сетями. Также могут обмениваться служебной информацией между собой.
  
+ <u>**Повторители**</u> и <u>**хабы**</u> используются, когда устройства находятся на большом расстоянии.
Причина в том, что в физической среде происходит постепенное затухание сигнала. Данные устройства распознают сигнал и повторяют в первоначальном виде.
Обычно у витой пары (прямой) и кроссовер дистанция составляет 100 метров. Если захотим что-то передать, что превышает это расстояние, понадобится более качественные кабеля или промежуточные устройства.

- ***Повторитель*** - 1 вход и 1 выход (2 порта). Соединяет 2 устройства.

- ***Хаб*** или ***концентратор*** - ***многопортовый повторитель***. Концепция работы, как у повторителя, но получив сигнал, к примеру с порта 1, он отправит сигнал на другие порты, к которым подключены кабеля (другие устройства). В практических работах они будут.

> У хабов есть одна проблема. Если на 2 порта и более прийдёт одновременно сигнал, то произойдёт коллизия (информация столкнётся, перемешается и восстановить нельзя будет). Происходит из-за того, что внутри шина для всех портов (шина в данном контексте - 1 среда передачи данных для многих). Их практически не используют, на смену пришли коммутаторы.

> Повторители и хабы работают на физическом уровне модели OSI (в практических работах). Этот уровень использует биты.

### Продолжим разбираться в промежуточных устройствах.
  
+ <u>**Коммутатора**</u> и <u>**сетевого моста**</u> обеспечивают связь ***внутри локальной сети*** (передача данных от 1 устройства к другому, в рамках одного адреса сети или подсети (об этом в заголовке про IP)).
  
Концепция работы (упрощённое описание):

> 1. ***Сетевой мост*** на физическом уровне модели OSI распознаётся сигнал, который послали по кабелю, преобразует его ***в кадры***. К каждому кадру добавляют ***заголовок*** и ***трейлер***.
> 2. Далее сетевой мост высчитывает ***check sum/контрольная сумма*** кадра и сранивает с трейлером (сравнивает значения).
> 3. Если не совпало, то кадр отбрасывется.
> 4. Если совпало, то сетевой мост изучает заголовок. В данном случае ***физический адрес*** получетеля (MAC-адрес устройства).
> 5. ***MAC-адрес*** - уникальный номер каждого устройства. 12 символов в 16 ССЧ. Первая половина - адрес производителя. Вторая половина - уникальный идентификатор. Он всегда постоянен.
> 6. У устройств в памяти хранится таблица - MAC-адрес (тот самый физический адрес) и ***порт*** (физический, номер).   
> 7. Если в таблице MAC-адрес есть, то кадр передаётся на порт.  
> 8. Если нет, то включается механизм поиска MAC-адреса. 
> 9. Здесь задействуется ARP-протокол. У каждого устройства есть эта ARP-таблица, по мере необходимости, она обновляется. Если физический адрес есть, то таблица его выдаст.  
> 10. Если MAC-адреса нету в таблице, то устройство делает ***широковещательный запрос ARP*** (в заголовок кадра записывается последнее значение физического адреса - в 16-чной системе счисления это FFF...). Он рассылается всем устройствам в сети.
 
> В запросе будет находится MAC-адрес, IP-адрес источника, IP-адрес получателя. Его суть: "кому принадлежит этот IP-адрес."

> 11. Cоответсвующее устройство с таким IP, отправляет ответ. В нём будет записан MAC-адрес получателя. 
> 12. После этого обновляется таблица. Теперь можно начинать передачу данных.

> Для понимания:

<img width="520" height="558" alt="image" src="https://github.com/user-attachments/assets/7a0bdf8c-5dba-4a37-b274-1a0af7704a30" />

> Так выглядит запрос.

<img width="454" height="364" alt="image" src="https://github.com/user-attachments/assets/4e0a8a48-fb45-4439-8447-c684120300c6" />
 
> Так выглядит ответ

> Коммутаторы и сетевые мосты работают на канальном уровне модели OSI. Этот уровень использует кадры.

### Продолжим.

* <u>**Коммутатор**</u> - ***многопортовый сетевой мост***. Главное отлчиие, что данное устройство ищет физические адреса аппаратно, а мост программно.

Теперь поговорим про устройтсво, которые работает на сетевом уровне модели OSI. Это уровень использует ***пакеты***. На этом уровне работает IP-протокол.

* <u>**Маршрутизатор**</u> обеспечивают между локальными сетями, передаёт данные между ними. Его задача определить путь, по которому будут проходить пакеты. Для этого используется статическая или динамическая маршрутизация (о в практических работах).

Мы разобрали какие устройства может использовать сеть, а теперь поговорим о её размерах и топологии. Есть много разных сетей, но здесь приведу лишь отдельные примеры для понимания.

### Сети, классификация

1. <u>**Персональная сеть**</u> - передача данных между устройствами, которые находятся рядом друг с другом. Пример: часы и смартфон. Расстояние 10-20см до пары метров. Могут взаимодейтсвовать с другими сетями. Используют Wi-Fi, Bletooth,...
   
2. <u>**Локальная сеть**</u> - объединяет устрйства на небольшом расстоянии (1-2 км, мб чуть больше). Не зависит от других сетей. Пример: офис.

> Одноранговые локальные сети - без серверов, состоят из компьютеров, мб принтеров. Компы являются и клиентами, и серверами.

> C сервером. Примеры серверов: файл-сервер, принт-сервер или сервер печати, почтовый сервер, сервер базы данных и другие.
   
3. <u>**Виртуальная приватная сеть**</u> - для безопасного и защищённого соединения. Подключения отдельных серверов с обеих сторон через глобальную сеть.
> Пример: у работодателя есть такая сеть для доступа к закрытым ресурсам для определённых сотрудников, но находится в другом филиале конторы.э

4. <u>**Территориальные сети**</u> - 100 – 1000 км: Региональные и корпоративные.
> Пример: чтобы отделения могли обмениваться информацией между собой в случае непредвиденных обстоятельств (оповещение и т.д.). На этом уровне задействовано другое оборудование: высокпроизводительное роутеры и оптоволоконные кабеля.
   
5. <u>**Глобальная сеть**</u> - объединяет между собой неограниченное количество локальных, региональных сетей, может находиться в нескольких странах.
> Задействованы магистральные кабеля (по океану), спутники и т.д. Пример: интернет.

Если приводить пример современной реализации сетей, то давайте рассмотрим провайдер.

> Допустим, пользователь подключается к сети и пишет сообщение своему другу, но он в другом регионе, то путь запроса следующий:
> конечный пользователь -> локальный провайдер -> региональный провайдер -> магистральный провайдер -> региональный провайдер друга -> локальный провайдер друга -> конечный пользователь (друг).

* До магистрального уровня подключение к провайдеру идёт через POP (точка присутствия), на магистральном через NAT (точка доступа к сети), перенаправляет трафик к нужному региональному провайдеру.

### Топология

Топология бывает физическая и логическая. В практических работах используем логическую. Виды:

* ***полносвязная***. Все устройтсва соединены между собой.
> Из +: надёжность. Из -: закупка дополнительных кабелей.
  
* ***шинная***. Все устройства подключены к 1 кабелю, передача данных по шине.
> Из +: дёшево. Из -: поломки из-за высконой нагрузки, также ограниченная длина кабеля.
  
* ***звезда***. Для связи между устройствами используется центральный узел. В данном случае промежуточные устройства.
> Из +: хорошая изоляция устройств и простота в расширении (подключил к порту). Из -: если сломался центральный узел, то сеть упала, если сломался пк, то сеть дальше функционирует (это +).
  
* ***кольцевая***. Передача данных по кольцу.
> Из +: надёжность. Из -: если сломался пк, то прийдётся его убрать, чтобы сеть дальше функционировала.

В чистом виде не используются, обычно это комбинация видов. Теперь перейдём к IP-адресам.

### IP-адреса.

+ IP-адрес - логический адрес устройства в сети.

+ Статические (вводятся вручную).
> Удобно, когда нужен один и тот же IP. Пример: сервер.

+ Динамиеческие.
> Выдаются автоматически при подключении к сети. Позволяет адрес использовать повторно, когда устройство отключается от сети. (DHCP)

+ IPv4 - 32 битный адрес (4 байта/ 4 октета). 1-ый октет слева и так далее.
+ IPv6 - 128 бит.

На практических работах будем использовать IPv4.

<img width="916" height="199" alt="image" src="https://github.com/user-attachments/assets/82eadf3a-c511-4064-a7b8-43c8ebd9e965" />

> Раньше использовалось деление на классы, но вскоре их отменили из-за большое количества пользователей в интернете, на смену пришла CIDR.

- класс А отвечал за большие сети. Диапазон: 0.0.0.0 - 127.255.255.255
  
- класс B - за средние сети. 128.0.0.0 - 191.255.255.255
  
- класс С - за маленькие сети. 192.0.0.0 - 223.255.255.255

- Класс D - за мульикаствещание. 224.0.0.0 - 239.255.255.255
  
- Класс E - для экспериментальных целей. 240.0.0.0 - 255.255.255.255

> У каждого класса своя ***маска подсети***. А - 255.0.0.0 или префикс /8. В - 255.255.0.0 или /16. С - 255.255.255.0 или /24...

* То есть ***маска подсети*** определяет границу сетей, помогает маршрутизатору понять куда и как передавать пакеты.

<img width="633" height="800" alt="image" src="https://github.com/user-attachments/assets/c4f9392e-965f-45b4-9fb0-162b036f0fc0" />

Разберём по подробнее:

- Для класса А был выделен только 1 октет под ***адрес сети***, а 3 оставшихся октета под ***хосты***. Пример: сеть 11.0.0.0. 11.0.0.0 - адрес сети. 11.255.255.255 - широковещательный адрес. Оставшиеся адреса отдавали хостам. Получится около 16 миллионов +-.

- Для класа В выделено 2 октета для сети. Пример: сеть 129.0.0.0. 129.0.0.0 - адрес сети. 129.0.255.255 - широковещательный адрес. Оставшиеся адреса отдавали хостам.

- Для класса С 3 октета и так далле.

> Суть в том, что из одного класса в другой класс устройства напрямую не могли обратиться. Для этого ей нужен шлюз (проще говоря, роутер для выхода в другую сеть). Но бывают и другие ситуации.

Пример: допустим, что у нас нет столько IP-адресов, нет роутера, а сеть нужно разделить. Чтобы разработчики не имели доступ к файлам отдела маркетинга, отдела бухгалтерии, и т.д. У нас есть только 1 IP, к примеру, 192.168.0.0.

1. Первые 3 октета мы трогать не можем. Прийдётся делить 4 октет. А у нас 4 отдела, в каждом по 15 пк.

2. Для IPv4 есть формула ***N+S+H=32***. ***N*** - кол-во битов отданные под сеть (речь идёт к какому классу относится). ***S*** - кол-во заимственных битов у хостов, чтобы отдать на подсети. ***H*** - кол-во битов для хостов.

> Правило при разбиении сети на подсети: ***1 маска - для всех подсетей***.

3. ***S = 2^(кол-во битов, которое отдадим) >= количества требуемых подсетей***. 2^2 = 4. 2 бита отдадим.

4. ***Маска*** = N + S***. 24+2 = 26. 255.255.255.192.
   
5. ***H = 32 - S - N*** = 32 - 24 - 2 = 6. ***2^H >= требуемых адресов.*** 2^6 = 64 - 2 (адрес сети, широковещательный адрес) = 62 > 60. 6 битов отдадим на подсети.
   
6. Отдел 1 - 192.168.0.0-192.168.63.255, oтдел 1 - 192.168.64.0-192.168.127.255, Отдел 1 - 192.168.128.0-192.168.191.255, Отдел 1 - 192.168.192.0-192.168.255.255.

Задачка по IP-адресам и маскам решена, теперь перейдём к частным IP-адресам.

* 192.168.x.x: Чаще всего используется в домашних и небольших локальных сетях.

* 10.x.x.x: Широко применяется в корпоративных сетях.
  
* 172.16.x.x — 172.31.x.x: Также используются в частных сетях.
  
> Эти адреса ***не являются маршрутизируемыми в интернете*** и используются ***только внутри локальных сетей***.

Мы разобрались в базовой терминологии компьютерных сетей. Теперь перейдёи к практическим работам. Где разберём ещё пару тем, терминов (модель TCP/IP и OSI, DNS, DHCP, TCP, UDP).




   

