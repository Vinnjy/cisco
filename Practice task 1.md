## Практическое задание 1: ICMP симуляция

1. Построить схему сети

<img width="683" height="376" alt="image" src="https://github.com/user-attachments/assets/cf60245b-9f3a-48f8-b4ed-8f13c2459bae" />

> Чтобы прописать IP-адреса и префиксы, нажмите на ***Place Note*** (справа есть панель, выберите второй, считая сверху)

2. Пропишем IP-configuration и названия конечных устройств.

<img width="299" height="242" alt="image" src="https://github.com/user-attachments/assets/b39ad07e-428b-46c8-8f18-bb1a86de4710" />
</br>
<img width="305" height="244" alt="image" src="https://github.com/user-attachments/assets/2502c4d9-0d4f-420e-8103-fa9014e2ed1e" />
</br>
<img width="307" height="243" alt="image" src="https://github.com/user-attachments/assets/80cf1f5a-9a3a-427c-b758-a9eabd3784d9" />
</br>
<img width="305" height="253" alt="image" src="https://github.com/user-attachments/assets/a643d405-e6ee-4823-a267-67541865561e" />
</br>
<img width="275" height="289" alt="image" src="https://github.com/user-attachments/assets/c038fde5-000a-41e3-9646-fd7a39d1226c" />

3. Пропингуем comp1 и сервер в симуляции и посмотрим, что происходит.

> Где написано Realtime, за ним находится режим Simulation (нажмите на него)

> Нажмите на Edit Filters, уберите во всех вкладках галочки, кроме ICMP, ARP.

Но прежде, чем приступать разберёмся ICMP по подробнее.

**ICMP** - протокол для проверки сети и доступности устройств. Состоит из:
+ ICMP Echo Request (эхо запрос)
+ ICMP Echo Reply (эхо ответ)
* ICMP инкапсулируется в IP-пакеты, так как пакеты передаются по сети.

Структура ICMP:

1. Заголовок:
   * Тип сообщения (Type): 0 для ответа, 8 для запроса.
   * Код (Code): более подробная информация о типе сообщения (у типа 0 и 8 только код 0, который означает эхо-запрос и эхо-ответ).
   * Контрольная сумма (Checksum): контрольная сумма для проверки целостности сообщения.
   * Идентификатор (ID). Если делается пинг, то посылается, как правило 4 эхо-запроса, id каждого не меняется.
   * Порядковый номер (Sequence Number). Если делается пинг, то посылается, как правило 4 эхо-запроса, порядковый номер каждого меняется.
2. Поле данных.
> Данные отправителя. Оно может быть пустым или включать случайные данные, что помогает проверить, вернулись ли эти же данные обратно.

Пример:

<img width="365" height="90" alt="image" src="https://github.com/user-attachments/assets/e83d3e84-00f5-41cc-9ff5-474406c407bd" />

> С более подробной информацией о ICMP, структуре и форматах сможете ознакомится здесь: https://net.academy.lv/lection/net_LS-10RU_icmp.pdf. Для практической работы достаточно.

Теперь разберём IP подробнее. Речь пойдёт не только про адрес.

IP - протокол, который обеспечивает передачу данных в интернете и других сетях. Он отвечает на такие вопросы:
+ Как данные должны быть упакованы? (пакеты)
+ Как данные должны быть адресованы? (логические адреса)
+ Как данные должжны быть маршрутизированы в сети? (маршруты)

Cтруктура IP-пакета:

1. Заголовок:
   * версия (version): указывает, какая версия IP используется (IPv4 или IPv6).
   * длина заголовка (Internet Header Length/IHL): определяет длину заголовка в 32-битных словах. К примеру, длина заголовка — 20 байт (5 слов). Может быть больше, если используются опции.
   * тип обслуживания (Type of Service/DiffServ/DSCP): управляет приоритетом доставки пакетов (маркировка трафика). 
   * общая длина (Total Length/TL): длина пакета = заголовок + данные.
   * идентификатор (Identification/ID): для сборки фрагментированных пакетов.
   * флаги (Flags): может ли пакет быть фрагментирован и есть ли ещё фрагменты.
   * смещение фрагмента (Fragment Offset): позиция фрагмента в исходном пакете.
   * время жизни (Time To Live/TTL): количество маршрутизаторов, через которые пакет может пройти, прежде чем быть отброшенным.
   * протокол (Protocol/PRO): какой протокол верхнего уровня (например, TCP, UDP) находится в полезной нагрузке (информация для пользователя, не служебная нагрузка).
   * заголовочная сумма (Header Checksum): для заголовка, используемая для обнаружения ошибок.
   * IP-адрес отправителя (Source IP Address/SRC).
   * IP-адрес получателя (Destination IP Address/DEST).
   * Опции (Options): дополнительные поля для отладки, тестирования или специфических настроек маршрутизации.
   * Отступы (Padding): добавляются для того, чтобы длина поля "Опции" была кратна 32 битам.
2. Данные (Data): полезная нагрузка.

Пример:

<img width="443" height="182" alt="image" src="https://github.com/user-attachments/assets/b0188b2e-8800-4c9c-8d29-9e7a3227e214" />

